on:
  schedule:
    - cron: '0 */12 * * *'
  workflow_dispatch: # Allow manual triggering
name: Excavator

permissions:
  contents: write

concurrency:
  group: update-manifests
  cancel-in-progress: false

jobs:
  excavate:
    name: Excavate
    runs-on: windows-latest
    timeout-minutes: 30
    steps:
      - uses: actions/checkout@v4
      - name: Excavate
        # Using @main to ensure compatibility with latest Scoop changes
        uses: ScoopInstaller/GithubActions@main
        env:
          USER_EMAIL: github.com@JsBComputing.se
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          SKIP_UPDATED: '1'
